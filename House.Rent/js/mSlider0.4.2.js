/*from tccdn minify at 2016-3-11 14:09:52,fileï¼š/cn/public/module/mSlider/0.4.2/mSlider.js?v=13082101*/
(function(){fish.extend({mSlider:function(aB,ap){function aD(){for(var c="",d=0;d<ae;){c+="<li><img src="+fish.all("a",aJ[d++]).attr("small")+" /></li>"}return c}function ar(d){d=0;for(var e=aw.removeClass("current"),f=0;f<e.length;f++){this===e[f]&&(d=f)}fish.one(this).addClass("current");Z(d)}function aj(){i.circle||(aa&&"string"===typeof i.nextBtnDisabled&&fish.one(aa).removeClass(i.nextBtnDisabled),am&&"string"===typeof i.prevBtnDisabled&&("begin"===Y.boundary?fish.one(am).addClass(i.prevBtnDisabled):fish.one(am).removeClass(i.prevBtnDisabled)),aa&&"string"===typeof i.nextBtnDisabled&&("end"===Y.boundary?fish.one(aa).addClass(i.nextBtnDisabled):fish.one(aa).removeClass(i.nextBtnDisabled)))}function Z(a){aK=W;if(!i.circle||!j){W=a,i.circle||(W>=ae?W=0:0>W&&(W=ae-1)),Y.index=W,Y.boundary=0===W?"begin":W===ae-al?"end":!1,W>aK?(i.beforeNextFn&&"function"===typeof i.beforeNextFn&&i.beforeNextFn(Y),at(i.nextFn)):W<aK&&(i.beforePrevFn&&"function"===typeof i.beforePrevFn&&i.beforePrevFn(Y),at(i.prevFn))}}function av(){(!i.circle||!j)&&Z(W+1)}function ax(){(!i.circle||!j)&&Z(W-1)}function ab(){ay&&clearTimeout(ay);ay=setTimeout(an,i.moveTime)}function ad(){clearTimeout(ay)}function at(a){switch(i.aniType){case"slide":W+(i.visibleNum-1)>ae-1&&(W=0);if(i.circle&&W<aK){for(var c=i.scrollNum,d=0;d<c;d++){fish.one(ag).html("top",fish.all(i.content+":last-child",af))}ag.css(aA+":"+-aC+"px");aC=0}az=i.circle?-aC:-W*aC;j=ag.anim(aA+":"+az+"px",300,function(){if(i.circle){if(W<aK){aC=ak*i.scrollNum,W++}else{var g=i.scrollNum;if("scrollLeft"==i.direction||"scrollTop"==i.direction){for(var b=0;b<g;b++){fish.one(ag).html("bottom",fish.all(i.content+":first-child",af))}}else{for(b=0;b<g;b++){fish.one(ag).html("top",fish.all(i.content+":last-child",af))}}ag.css(aA+":0px");W--;0>W&&(W=ae-1)}}aj();a&&"function"===typeof a&&a(Y);j=null});break;case"fade":!ao||!aq?(aE=fish.one(aG[W]),ao=au.anim(aH,i.fadeTime,function(){au.css("display: none;");ao=null;au=aE}),aq=aE.css("display:block;").anim(V,i.fadeTime,function(){aj();a&&"function"===typeof a&&a(Y);aq=null})):(ao&&(ao.stop(),fish.one(ao.elem).css("display: none;"+aH),ao=null),aq&&(aq.stop(),au=fish.one(aq.elem),aq=null,aE=fish.one(aG[W]),ao=fish.one(au).anim(aH,i.fadeTime,function(){au.css("display: none;");ao=null;au=aE}),aq=aE.css("display:block;").anim(V,i.fadeTime,function(){aj();a&&"function"===typeof a&&a(Y);aq=null})))}aw&&(aw.removeClass("current"),fish.one(aw[W]).addClass("current"))}function an(){"scrollLeft"==i.direction||"scrollTop"==i.direction?av():ax();ay=setTimeout(an,i.moveTime)}if(this[0]){var i={scrollNum:1,autoScroll:!0,moveTime:3500,direction:"scrollLeft",circle:!1,canvas:".mSlider_con ul",content:".mSlider_con li",nav:".mSlider_nav li",showNav:"orange",aniType:"slide",fadeTime:240,arrows:!1,arrowTheme:!1,fn:!1,prevFn:!1,nextFn:!1,prevBtn:!1,nextBtn:!1,prevBtnDisabled:!1,nextBtnDisabled:!1,visibleNum:1};fish.lang.extend(i,aB);var V,aH,aa,al=1,az=0,W=0,aJ=fish.all(i.content,this),ae=aJ.length,ag=fish.all(i.canvas,this),af=this,aw,j,ao,aq,ak,aA,o,aC,ay,aG,au,aE,aF=ae,aK,Y={};if(i.arrows){if(!i.prevBtn&&!i.nextBtn){switch(i.arrowTheme){default:fish.one(this[0].parentNode).html("top",'<div id="id_mSlider_prev" class="mSlider_arrow mSlider_prev group_left"><span id="tg_last" class="mSlider_arrow_inner mSlider_prev_inner btn01_a"></span></div>'),fish.one(this[0].parentNode).html("bottom",'<div id="id_mSlider_next" class="mSlider_arrow mSlider_next group_right"><span id="tg_next" class="mSlider_arrow_inner mSlider_next_inner btn02_a"></span></div>'),am=fish.dom("#tg_last"),aa=fish.dom("#tg_next")}}else{(am=(am=fish.dom(i.prevBtn,this))?am:fish.dom(i.prevBtn))&&(!i.circle&&"string"===typeof i.prevBtnDisabled)&&fish.one(am).addClass(i.prevBtnDisabled),aa=(aa=fish.dom(i.nextBtn,this))?aa:fish.dom(i.nextBtn)}}"x"==i.direction?i.direction="scrollLeft":"y"==i.direction&&(i.direction="scrollTop");switch(i.direction){case"scrollLeft":case"scrollRight":aA="left";o="width";ak=aJ.width();al=parseInt(fish.one(ag[0].parentNode).width()/ak,10);break;case"scrollTop":case"scrollBottom":aA="top";o="height";ak=aJ.height();al=parseInt(fish.one(ag[0].parentNode).height()/ak,10);break;default:aA="left",o="width",ak=aJ.width()}aC=ak*i.scrollNum;"custom"!==i.showNav&&this.css("position:relative;overflow:hidden;");ag.css("position:relative;"+o+":"+(ae+1)*ak+"px");"fade"===i.aniType&&(fish.browser("ms",8)||fish.browser("ms",6)||fish.browser("ms",7)?(V="filter:alpha(opacity=100);",aH="filter:alpha(opacity=1);"):(V="opacity:1;",aH="opacity:0.01"),ag.css(o+":"+ak+"px"),aG=fish.all(i.content,af),aG.css("display: none;"+aH),au=fish.one(aG[0]),au.css("display: block;"+V),aG.each(function(b){fish.one(b).css("position: absolute; z-index: "+aF--+";top: 0; left: 0;")}));i.autoScroll&&(ay=setTimeout(an,i.moveTime),"custom"===i.showNav?(fish.all(i.canvas,this).hover(ad,ab),fish.all(i.userNav,this).hover(ad,ab)):this.hover(ad,ab));if(i.showNav){o="";var ah,aI,ai,am;switch(i.showNav){case"orange":o+="<ul class='mSlider_nav_orange mSlider_nav'>";for(var ac=0,X=ae;ac<X;ac++){o+="<li><a href='javascript:void(0)'>"+(ac+1)+"</a></li>"}this.html("bottom",o+"</ul>");break;case"bottom-green":o='<div class="mSlider_nav_bg"></div><div class="mSlider_nav_bottom_green mSlider_nav clearfix"><div class="holder clearfix">';ah=fish.all("a",ag);ai=ak*i.scrollNum/ae+"px";ac=0;for(X=ae;ac<X;ac++){aI=fish.one(ah[ac]).attr("title"),o+='<a style="width:'+ai+';" href="javascript:void(0);" title="'+aI+'"><span>'+aI+'</span><i class="outter">\u25c6</i></a>'}o+="</div></div>";this.html("bottom",o);i.nav=".mSlider_nav a";break;case"earth-yellow":o='<div class="mSlider_nav_bg"></div><div class="mSlider_nav_earth_yellow mSlider_nav clearfix"><div class="holder clearfix">';ah=fish.all("a",ag);ai=ak*i.scrollNum/ae+"px";ac=0;for(X=ae;ac<X;ac++){aI=fish.one(ah[ac]).attr("title"),o+='<a style="width:'+ai+';" href="javascript:void(0);" title="'+aI+'"><span>'+aI+'</span><i class="outter">\u25c6</i></a>'}o+="</div></div>";this.html("bottom",o);i.nav=".mSlider_nav a";break;case"thumbnail":o+="<ul class='mSlider_nav_thumbnail mSlider_nav clearfix'>";o+=aD();o+="</ul>";this.html("bottom",o);break;case"custom":i.nav=i.userNav}aw=i.userNav?fish.all(i.nav):fish.all(i.nav,this);if("thumbnail"===i.showNav){aw.hover(ar,function(){})}else{aw.on("mouseover",ar)}}fish.one(aw).addClass("current");Y.startScroll=ab;Y.stopScroll=ad;Y.scrollTo=Z;Y.scrollNext=av;Y.scrollPrev=ax;Y.boundary="begin";Y.index=0;am&&aa&&(fish.one(am).on("click",function(){(i.circle||"begin"!==Y.boundary)&&Y.scrollPrev()}),fish.one(aa).on("click",function(){(i.circle||"end"!==Y.boundary)&&Y.scrollNext()}));ap&&ap(Y);"function"===typeof i.fn&&i.fn(Y);return Y}}})})();